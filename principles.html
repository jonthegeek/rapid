<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>rapid design principles • rapid</title><script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="rapid design principles"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">rapid</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/jonthegeek/rapid/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-title-body">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>rapid design principles</h1>
      <small class="dont-index">Source: <a href="https://github.com/jonthegeek/rapid/blob/HEAD/principles.md" class="external-link"><code>principles.md</code></a></small>
    </div>

<div id="rapid-design-principles" class="section level1">

<p><em>This is an experiment in making key package design principles explicit, versus only implicit in the code. The goal is to make maintenance easier, when spread out over time and across people. This idea was copied from <a href="https://github.com/r-lib/usethis/blob/main/principles.md" class="external-link">usethis</a>.</em></p>
<div class="section level2">
<h2 id="class-names">Class names<a class="anchor" aria-label="anchor" href="#class-names"></a></h2>
<p>I’ve gone back and forth between “api_{class}” and “{class}” for the class names. I am currently settled on using “{class}”, because the only function I conflict with is <code><a href="https://rdrr.io/r/base/license.html" class="external-link">base::license()</a></code>, which just prints info about the R license. I also belatedly noticed that I had <code>server()</code> (singular) where the OAS specification has <code>servers()</code>. I have updated that. Be careful to match the class names to the pluralization in the specification!</p>
<p>Update: Arguments that match function names (which are then called) are no bueno. I’m using <code>class_{class}</code> for the constructor functions, similar to <code>class_character()</code>, etc, from S7. I am doing this strictly, even for plural objects. I hate the idea of having both singular and plural versions of objects, but I think it’s worth it in order to match the schema fairly closely.</p>
</div>
<div class="section level2">
<h2 id="specification-extensions">Specification extensions<a class="anchor" aria-label="anchor" href="#specification-extensions"></a></h2>
<p>OAS allows for <a href="https://spec.openapis.org/oas/v3.1.0#specificationExtensions" class="external-link">Specification Extensions</a>, which are extra fields that begin with “x-”. I do not yet support these anywhere, and capture them in <code>...</code> in order to throw them away without errors. Later I should at least check these, and ideally deal with them.</p>
</div>
<div class="section level2">
<h2 id="single-home">Single home<a class="anchor" aria-label="anchor" href="#single-home"></a></h2>
<p>Many aspects of an APID can be specified in multiple places. For example, operation objects have <code>parameters</code>, which can either be a parameter object or a reference to a parameter object. Likewise, path items themselves can have similar <code>parameters</code> objects.</p>
<p>Instead of defining them in multiple places, each reference to <code>parameters</code> will be a reference to <a href="mailto:components@parameters" class="email">components@parameters</a>@parameter_name. If an APID has the same name defined in multiple places:</p>
<ul><li>If the definitions are identical, they will be merged.</li>
<li>If the definitions are different, an identifier will be added to the name, and the reference will reference the particular example.</li>
<li>The first one will get the raw name, and then after that we check if the new one matches the existing one.</li>
</ul><p>I have not (at the time of this writing) fully worked out how this will work mechanically, but the goal is for each object to have a <code>getter</code> that reads from the single source of truth.</p>
<p>I think during construction these should be allowed, but then, after everything is done, they should be “simplified” into the components. This is similar to what I do in <code><a href="reference/as_rapid.html">as_rapid()</a></code> with <code>expand_servers(x)</code>. Instead of just <code>expand_servers(x)</code>, I’ll want some sort of <code>finalize_rapid()</code>, which calls <code><a href="reference/expand_servers.html">expand_servers()</a></code>, <code>collate_components()</code> (or whatever I call it), and maybe other things.</p>
</div>
<div class="section level2">
<h2 id="notes">Notes<a class="anchor" aria-label="anchor" href="#notes"></a></h2>
<p>This section is for notes as I implement specific things. My intention is to delete these as I make decisions, and move the decisions up above.</p>
<p>Parameter objects can be defined with a <code>content</code> object (<code>schema</code>, <code>example(s)</code>, <code>encoding</code>, and <code>encoding</code> is a map of properties in the schema to <code>contentType</code>, <code>style</code>, <code>explode</code> etc), or with a bunch of things (<code>schema</code>, <code>example(s)</code>, <code>style</code>, <code>explode</code>). I <em>think</em> <code>contentType</code> can be inferred from <code>style</code> + <code>location</code>, maybe? Since it isn’t in the body, it’s text, right?</p>
<p>Parameters defined in components <em>can</em> be references (according to the spec), but I don’t see any examples of that in apis.guru.</p>
<p>Parameters can be defined using <code>content</code> or <code>schema</code>, or as a <code>$ref</code> (which is the real definition). <code>$ref</code> is only used inside <code>paths</code>.</p>
<p>When I implement the paths versions of these definitions (where <code>$ref</code> is used), I need to allow for either a reference or a full parameter. To keep things vectorized, I might need to put empty spots in the parameter vector?</p>
<p>I’m intentionally leaving most “schema” info on the table. I’ll get more details in a later pass. I’m going to try to keep the unparsed definition for use by users, though.</p>
</div>
</div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Jon Harmon.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

